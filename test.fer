let io = import('std/io');
let fs = import('std/fs');
let os = import('std/os');
let sys = import('std/sys');
let curl = import('curl/curl');

let url = 'http://212.183.159.230/10MB.zip';
let out = '10MB.zip';
let outFile = fs.fopen('10MB.zip', 'w+');

let c = curl.newEasy();
c.setOpt(curl.OPT_URL, url);
c.setOpt(curl.OPT_FOLLOWLOCATION, 1);
c.setOpt(curl.OPT_NOPROGRESS, 0);
c.setOpt(curl.OPT_WRITEDATA, outFile);
let result = c.perform();

io.println();
if result != 0 {
	io.println('Failed to download file \'', url, '\' to \'', out, '\'');
	sys.exit(result);
}
io.println('Downloaded file: ', out);
os.rm(out);
io.println('Removed downloaded file');